{"uid":"7c9e7c80c6d5c17b","name":"test_device_pairing_multi_device","fullName":"test_search_and_pair#test_device_pairing_multi_device","historyId":"e20eabaafd4e88906a36d35d1f7d3f1e","time":{"start":1763427938948,"stop":1763427969332,"duration":30384},"description":"多设备并行配对测试 - 优化版","descriptionHtml":"<p>多设备并行配对测试 - 优化版</p>\n","status":"failed","statusMessage":"Failed: 部分设备测试失败: device1","statusTrace":"parallel_drivers = {'device1': <appium.webdriver.webdriver.WebDriver (session=\"913da759-9197-486d-8a72-97b8fdbee118\")>}\n\n    @pytest.mark.app_type(\"ai_mate\")\n    @pytest.mark.pairing_test\n    def test_device_pairing_multi_device(parallel_drivers):\n        \"\"\"多设备并行配对测试 - 优化版\"\"\"\n        with allure.step(\"多设备并行配对测试\"):\n            results = {}\n    \n            # 并行执行所有设备配对\n            with ThreadPoolExecutor(max_workers=len(parallel_drivers)) as executor:\n                futures = {\n                    executor.submit(_run_single_pairing_test, driver, name): name\n                    for name, driver in parallel_drivers.items()\n                }\n    \n                # 收集结果\n                for future in as_completed(futures):\n                    device_name, success, error = future.result()\n                    results[device_name] = (success, error)\n    \n                    # Allure 记录\n                    if success:\n                        allure.attach(f\"设备 {device_name} 配对成功\", name=f\"{device_name}_结果\")\n                    else:\n                        allure.attach(f\"设备 {device_name} 配对失败: {error}\", name=f\"{device_name}_错误\")\n    \n            # 汇总失败设备\n            failed = [name for name, (success, _) in results.items() if not success]\n    \n            if failed:\n>               pytest.fail(f\"部分设备测试失败: {', '.join(failed)}\")\nE               Failed: 部分设备测试失败: device1\n\ntest_search_and_pair.py:61: Failed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"device_manager","time":{"start":1763427925355,"stop":1763427925496,"duration":141},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"attachmentStep":false,"hasContent":false},{"name":"parallel_drivers","time":{"start":1763427925496,"stop":1763427938947,"duration":13451},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"attachmentStep":false,"hasContent":false}],"testStage":{"description":"多设备并行配对测试 - 优化版","status":"failed","statusMessage":"Failed: 部分设备测试失败: device1","statusTrace":"parallel_drivers = {'device1': <appium.webdriver.webdriver.WebDriver (session=\"913da759-9197-486d-8a72-97b8fdbee118\")>}\n\n    @pytest.mark.app_type(\"ai_mate\")\n    @pytest.mark.pairing_test\n    def test_device_pairing_multi_device(parallel_drivers):\n        \"\"\"多设备并行配对测试 - 优化版\"\"\"\n        with allure.step(\"多设备并行配对测试\"):\n            results = {}\n    \n            # 并行执行所有设备配对\n            with ThreadPoolExecutor(max_workers=len(parallel_drivers)) as executor:\n                futures = {\n                    executor.submit(_run_single_pairing_test, driver, name): name\n                    for name, driver in parallel_drivers.items()\n                }\n    \n                # 收集结果\n                for future in as_completed(futures):\n                    device_name, success, error = future.result()\n                    results[device_name] = (success, error)\n    \n                    # Allure 记录\n                    if success:\n                        allure.attach(f\"设备 {device_name} 配对成功\", name=f\"{device_name}_结果\")\n                    else:\n                        allure.attach(f\"设备 {device_name} 配对失败: {error}\", name=f\"{device_name}_错误\")\n    \n            # 汇总失败设备\n            failed = [name for name, (success, _) in results.items() if not success]\n    \n            if failed:\n>               pytest.fail(f\"部分设备测试失败: {', '.join(failed)}\")\nE               Failed: 部分设备测试失败: device1\n\ntest_search_and_pair.py:61: Failed","steps":[{"name":"多设备并行配对测试","time":{"start":1763427938948,"stop":1763427969330,"duration":30382},"status":"failed","statusMessage":"Failed: 部分设备测试失败: device1\n","statusTrace":"  File \"C:\\Users\\536131\\Documents\\GitHub\\cg02app\\ai_mate_tests\\testsplan\\test_search_and_pair.py\", line 61, in test_device_pairing_multi_device\n    pytest.fail(f\"部分设备测试失败: {', '.join(failed)}\")\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\536131\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\_pytest\\outcomes.py\", line 177, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n","steps":[],"attachments":[{"uid":"53c160c2f87b0ccb","name":"device1_错误","source":"53c160c2f87b0ccb.attach","type":"text/plain","size":537}],"parameters":[],"attachmentsCount":1,"shouldDisplayMessage":true,"stepsCount":0,"attachmentStep":false,"hasContent":true}],"attachments":[{"uid":"6b013f91a3dc1b8d","name":"device1_test_search_and_pair.py__test_device_pairing_multi_device","source":"6b013f91a3dc1b8d.png","type":"image/png","size":453180},{"uid":"6a619d21fa0c7738","name":"log","source":"6a619d21fa0c7738.txt","type":"text/plain","size":221},{"uid":"bb05e9da1228a63b","name":"stdout","source":"bb05e9da1228a63b.txt","type":"text/plain","size":795},{"uid":"67b10970b46a2544","name":"stderr","source":"67b10970b46a2544.txt","type":"text/plain","size":170}],"parameters":[],"attachmentsCount":5,"shouldDisplayMessage":true,"stepsCount":1,"attachmentStep":false,"hasContent":true},"afterStages":[{"name":"parallel_drivers::0","time":{"start":1763427970101,"stop":1763427970674,"duration":573},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"attachmentStep":false,"hasContent":false}],"labels":[{"name":"tag","value":"pairing_test"},{"name":"suite","value":"test_search_and_pair"},{"name":"host","value":"DESKTOP-TFDMFFN"},{"name":"thread","value":"48048-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test_search_and_pair"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":["pairing_test"]},"source":"7c9e7c80c6d5c17b.json","parameterValues":[]}