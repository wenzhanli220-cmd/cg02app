{"uid":"46d4d85c99a1b9fd","name":"test_bluetooth_stability","fullName":"ai_mate_tests.testsplan.test_open_bluetooth#test_bluetooth_stability","historyId":"e5df1566ac8e46621c543216b4fa6b78","time":{"start":1761013537865,"stop":1761013550430,"duration":12565},"description":"多设备并行蓝牙测试 - xdist 兼容","descriptionHtml":"<p>多设备并行蓝牙测试 - xdist 兼容</p>\n","status":"skipped","statusMessage":"XFAIL 部分设备测试失败: device2\n\n_pytest.outcomes.XFailed: 部分设备测试失败: device2","statusTrace":"parallel_drivers = {'device1': <appium.webdriver.webdriver.WebDriver (session=\"07b3b6b7-bddf-4b77-b6f6-c4fdfbdfb49b\")>, 'device2': <appium.webdriver.webdriver.WebDriver (session=\"d0dd67b4-8f1c-489e-9f29-4a4d22e02271\")>}\n\n    @pytest.mark.app_type(\"settings\")\n    @pytest.mark.bluetooth_test\n    def test_bluetooth_stability(parallel_drivers):\n        \"\"\"多设备并行蓝牙测试 - xdist 兼容\"\"\"\n        with allure.step(\"多设备并行蓝牙稳定性测试\"):\n            results = {}\n    \n            # 并行执行所有设备测试\n            with ThreadPoolExecutor(max_workers=len(parallel_drivers)) as executor:\n                future_to_device = {\n                    executor.submit(_run_single_device_test, driver, device_name): device_name\n                    for device_name, driver in parallel_drivers.items()\n                }\n    \n                for future in as_completed(future_to_device):\n                    device_name, success, error = future.result()\n                    results[device_name] = (success, error)\n    \n                    # 记录到 Allure\n                    if success:\n                        allure.attach(f\"设备 {device_name} 测试通过\", name=f\"{device_name}_结果\")\n                    else:\n                        allure.attach(f\"设备 {device_name} 测试失败: {error}\", name=f\"{device_name}_错误\")\n    \n            # 汇总结果\n            failed_devices = [name for name, (success, error) in results.items() if not success]\n    \n            if failed_devices:\n>               pytest.xfail(f\"部分设备测试失败: {', '.join(failed_devices)}\")\nE               _pytest.outcomes.XFailed: 部分设备测试失败: device2\n\nai_mate_tests\\testsplan\\test_open_bluetooth.py:53: XFailed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"device_manager","time":{"start":1761013516388,"stop":1761013516389,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"parallel_drivers","time":{"start":1761013516389,"stop":1761013537864,"duration":21475},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"description":"多设备并行蓝牙测试 - xdist 兼容","status":"skipped","statusMessage":"XFAIL 部分设备测试失败: device2\n\n_pytest.outcomes.XFailed: 部分设备测试失败: device2","statusTrace":"parallel_drivers = {'device1': <appium.webdriver.webdriver.WebDriver (session=\"07b3b6b7-bddf-4b77-b6f6-c4fdfbdfb49b\")>, 'device2': <appium.webdriver.webdriver.WebDriver (session=\"d0dd67b4-8f1c-489e-9f29-4a4d22e02271\")>}\n\n    @pytest.mark.app_type(\"settings\")\n    @pytest.mark.bluetooth_test\n    def test_bluetooth_stability(parallel_drivers):\n        \"\"\"多设备并行蓝牙测试 - xdist 兼容\"\"\"\n        with allure.step(\"多设备并行蓝牙稳定性测试\"):\n            results = {}\n    \n            # 并行执行所有设备测试\n            with ThreadPoolExecutor(max_workers=len(parallel_drivers)) as executor:\n                future_to_device = {\n                    executor.submit(_run_single_device_test, driver, device_name): device_name\n                    for device_name, driver in parallel_drivers.items()\n                }\n    \n                for future in as_completed(future_to_device):\n                    device_name, success, error = future.result()\n                    results[device_name] = (success, error)\n    \n                    # 记录到 Allure\n                    if success:\n                        allure.attach(f\"设备 {device_name} 测试通过\", name=f\"{device_name}_结果\")\n                    else:\n                        allure.attach(f\"设备 {device_name} 测试失败: {error}\", name=f\"{device_name}_错误\")\n    \n            # 汇总结果\n            failed_devices = [name for name, (success, error) in results.items() if not success]\n    \n            if failed_devices:\n>               pytest.xfail(f\"部分设备测试失败: {', '.join(failed_devices)}\")\nE               _pytest.outcomes.XFailed: 部分设备测试失败: device2\n\nai_mate_tests\\testsplan\\test_open_bluetooth.py:53: XFailed","steps":[{"name":"多设备并行蓝牙稳定性测试","time":{"start":1761013537865,"stop":1761013550429,"duration":12564},"status":"failed","statusMessage":"_pytest.outcomes.XFailed: 部分设备测试失败: device2\n","statusTrace":"  File \"C:\\Users\\536131\\Documents\\GitHub\\cg02app\\ai_mate_tests\\testsplan\\test_open_bluetooth.py\", line 53, in test_bluetooth_stability\n    pytest.xfail(f\"部分设备测试失败: {', '.join(failed_devices)}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\536131\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\_pytest\\outcomes.py\", line 205, in xfail\n    raise XFailed(reason)\n","steps":[],"attachments":[{"uid":"9af3478a4fc726a","name":"device2_错误","source":"9af3478a4fc726a.attach","type":"text/plain","size":537},{"uid":"52caf61b3e310f62","name":"device1_结果","source":"52caf61b3e310f62.attach","type":"text/plain","size":27}],"parameters":[],"stepsCount":0,"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":true,"attachmentsCount":2}],"attachments":[{"uid":"cdeb3828179f723e","name":"stdout","source":"cdeb3828179f723e.txt","type":"text/plain","size":742}],"parameters":[],"stepsCount":1,"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":true,"attachmentsCount":3},"afterStages":[{"name":"parallel_drivers::0","time":{"start":1761013550526,"stop":1761013551727,"duration":1201},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"labels":[{"name":"tag","value":"bluetooth_test"},{"name":"parentSuite","value":"ai_mate_tests.testsplan"},{"name":"suite","value":"test_open_bluetooth"},{"name":"host","value":"DESKTOP-TFDMFFN"},{"name":"thread","value":"50748-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"ai_mate_tests.testsplan.test_open_bluetooth"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["bluetooth_test"]},"source":"46d4d85c99a1b9fd.json","parameterValues":[]}