{"uid":"63793985ec6b1f37","name":"test_device_pairing_multi_device","fullName":"ai_mate_tests.testsplan.test_search_and_pair#test_device_pairing_multi_device","historyId":"242d2332d267b50f121cdb0dcf70c76e","time":{"start":1763428486302,"stop":1763428516716,"duration":30414},"description":"多设备并行配对测试 - 优化版","descriptionHtml":"<p>多设备并行配对测试 - 优化版</p>\n","status":"failed","statusMessage":"Failed: 部分设备测试失败: device1","statusTrace":"parallel_drivers = {'device1': <appium.webdriver.webdriver.WebDriver (session=\"cf98cc96-bc7a-425c-8cc6-1b9a0e0867d2\")>}\n\n    @pytest.mark.app_type(\"ai_mate\")\n    @pytest.mark.pairing_test\n    def test_device_pairing_multi_device(parallel_drivers):\n        \"\"\"多设备并行配对测试 - 优化版\"\"\"\n        with allure.step(\"多设备并行配对测试\"):\n            results = {}\n    \n            # 并行执行所有设备配对\n            with ThreadPoolExecutor(max_workers=len(parallel_drivers)) as executor:\n                futures = {\n                    executor.submit(_run_single_pairing_test, driver, name): name\n                    for name, driver in parallel_drivers.items()\n                }\n    \n                # 收集结果\n                for future in as_completed(futures):\n                    device_name, success, error = future.result()\n                    results[device_name] = (success, error)\n    \n                    # Allure 记录\n                    if success:\n                        allure.attach(f\"设备 {device_name} 配对成功\", name=f\"{device_name}_结果\")\n                    else:\n                        allure.attach(f\"设备 {device_name} 配对失败: {error}\", name=f\"{device_name}_错误\")\n    \n            # 汇总失败设备\n            failed = [name for name, (success, _) in results.items() if not success]\n    \n            if failed:\n>               pytest.fail(f\"部分设备测试失败: {', '.join(failed)}\")\nE               Failed: 部分设备测试失败: device1\n\nai_mate_tests\\testsplan\\test_search_and_pair.py:61: Failed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"device_manager","time":{"start":1763428473164,"stop":1763428473313,"duration":149},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"attachmentStep":false,"hasContent":false},{"name":"parallel_drivers","time":{"start":1763428473313,"stop":1763428486302,"duration":12989},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"attachmentStep":false,"hasContent":false}],"testStage":{"description":"多设备并行配对测试 - 优化版","status":"failed","statusMessage":"Failed: 部分设备测试失败: device1","statusTrace":"parallel_drivers = {'device1': <appium.webdriver.webdriver.WebDriver (session=\"cf98cc96-bc7a-425c-8cc6-1b9a0e0867d2\")>}\n\n    @pytest.mark.app_type(\"ai_mate\")\n    @pytest.mark.pairing_test\n    def test_device_pairing_multi_device(parallel_drivers):\n        \"\"\"多设备并行配对测试 - 优化版\"\"\"\n        with allure.step(\"多设备并行配对测试\"):\n            results = {}\n    \n            # 并行执行所有设备配对\n            with ThreadPoolExecutor(max_workers=len(parallel_drivers)) as executor:\n                futures = {\n                    executor.submit(_run_single_pairing_test, driver, name): name\n                    for name, driver in parallel_drivers.items()\n                }\n    \n                # 收集结果\n                for future in as_completed(futures):\n                    device_name, success, error = future.result()\n                    results[device_name] = (success, error)\n    \n                    # Allure 记录\n                    if success:\n                        allure.attach(f\"设备 {device_name} 配对成功\", name=f\"{device_name}_结果\")\n                    else:\n                        allure.attach(f\"设备 {device_name} 配对失败: {error}\", name=f\"{device_name}_错误\")\n    \n            # 汇总失败设备\n            failed = [name for name, (success, _) in results.items() if not success]\n    \n            if failed:\n>               pytest.fail(f\"部分设备测试失败: {', '.join(failed)}\")\nE               Failed: 部分设备测试失败: device1\n\nai_mate_tests\\testsplan\\test_search_and_pair.py:61: Failed","steps":[{"name":"多设备并行配对测试","time":{"start":1763428486303,"stop":1763428516715,"duration":30412},"status":"failed","statusMessage":"Failed: 部分设备测试失败: device1\n","statusTrace":"  File \"C:\\Users\\536131\\Documents\\GitHub\\cg02app\\ai_mate_tests\\testsplan\\test_search_and_pair.py\", line 61, in test_device_pairing_multi_device\n    pytest.fail(f\"部分设备测试失败: {', '.join(failed)}\")\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\536131\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\_pytest\\outcomes.py\", line 177, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n","steps":[],"attachments":[{"uid":"f02128d2a8457bc7","name":"device1_错误","source":"f02128d2a8457bc7.attach","type":"text/plain","size":537}],"parameters":[],"attachmentsCount":1,"shouldDisplayMessage":true,"stepsCount":0,"attachmentStep":false,"hasContent":true}],"attachments":[{"uid":"3c77089e9989eef5","name":"device1_ai_mate_tests/testsplan/test_search_and_pair.py__test_device_pairing_multi_device","source":"3c77089e9989eef5.png","type":"image/png","size":453084},{"uid":"d8f0de99e0f627b8","name":"stdout","source":"d8f0de99e0f627b8.txt","type":"text/plain","size":795}],"parameters":[],"attachmentsCount":3,"shouldDisplayMessage":true,"stepsCount":1,"attachmentStep":false,"hasContent":true},"afterStages":[{"name":"parallel_drivers::0","time":{"start":1763428517391,"stop":1763428517946,"duration":555},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"attachmentStep":false,"hasContent":false}],"labels":[{"name":"tag","value":"pairing_test"},{"name":"parentSuite","value":"ai_mate_tests.testsplan"},{"name":"suite","value":"test_search_and_pair"},{"name":"host","value":"DESKTOP-TFDMFFN"},{"name":"thread","value":"48944-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"ai_mate_tests.testsplan.test_search_and_pair"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"c05c6807ca7f63f6","status":"failed","statusDetails":"Failed: 部分设备测试失败: device1","time":{"start":1763428150959,"stop":1763428181230,"duration":30271}}],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":["pairing_test"]},"source":"63793985ec6b1f37.json","parameterValues":[]}